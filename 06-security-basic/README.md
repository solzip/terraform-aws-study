# 06-security-basic - λ³΄μ• κΈ°μ΄

> π΅ **λ‚μ΄λ„**: μ¤‘κΈ‰ | **ν•™μµ μ‹κ°„**: 4μ‹κ°„

[β† λ©”μΈ READMEλ΅ λμ•„κ°€κΈ°](../../) | [β† μ΄μ „: 05-remote-state](../../tree/05-remote-state)

## π“ ν•™μµ λ©ν‘

- β… IAM Role λ° Policy μƒμ„± (μµμ† κ¶ν• μ›μΉ™)
- β… IAM Instance Profileλ΅ EC2μ— μ—­ν•  λ¶€μ—¬
- β… AWS KMS μ•”νΈν™” ν‚¤ μƒμ„± λ° κ΄€λ¦¬
- β… AWS Secrets Managerλ΅ λ―Όκ° μ •λ³΄ κ΄€λ¦¬
- β… Security Group μ„Έλ°€ν• μ μ–΄
- β… λ³΄μ• λ¨λ²” μ‚¬λ΅€ μ μ©

## π—οΈ μ•„ν‚¤ν…μ²

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚                      AWS Cloud                             β”‚
β”‚                                                             β”‚
β”‚  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”    β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”                β”‚
β”‚  β”‚  IAM Role        β”‚    β”‚  KMS Key         β”‚               β”‚
β”‚  β”‚  - EC2 μ—­ν•       β”‚    β”‚  - λ°μ΄ν„° μ•”νΈν™” β”‚               β”‚
β”‚  β”‚  - S3 μ½κΈ° κ¶ν•  β”‚    β”‚  - μλ™ ν‚¤ κµμ²΄  β”‚               β”‚
β”‚  β”‚  - CloudWatch    β”‚    β””β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”               β”‚
β”‚  β””β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”              β”‚                         β”‚
β”‚           β”‚                       β”‚ μ•”νΈν™”                  β”‚
β”‚           β”‚ μ—­ν•  λ¶€μ—¬             β”‚                         β”‚
β”‚           β–Ό                       β–Ό                         β”‚
β”‚  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”    β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”                 β”‚
β”‚  β”‚  EC2 Instance   β”‚    β”‚ Secrets Manager  β”‚                β”‚
β”‚  β”‚  (Instance      β”‚    β”‚  - DB λΉ„λ°€λ²νΈ   β”‚                β”‚
β”‚  β”‚   Profile)      β”‚    β”‚  - API ν‚¤        β”‚                β”‚
β”‚  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”    β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”                 β”‚
β”‚                                                             β”‚
β”‚  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”                                       β”‚
β”‚  β”‚  Security Group  β”‚                                      β”‚
β”‚  β”‚  - μµμ† κ¶ν•     β”‚                                      β”‚
β”‚  β”‚  - ν¬νΈλ³„ μ μ–΄   β”‚                                      β”‚
β”‚  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”                                       β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

## π“ ν”„λ΅μ νΈ κµ¬μ΅°

```
06-security-basic/
β”β”€β”€ README.md                         # ν„μ¬ λ¬Έμ„
β”β”€β”€ security.tf                       # λ³΄μ• λ¦¬μ†μ¤ + λ¨λ“ νΈμ¶
β”β”€β”€ variables.tf                      # λ³€μ μ •μ
β”β”€β”€ outputs.tf                        # μ¶λ ¥ κ°’
β”β”€β”€ versions.tf                       # Terraform/Provider λ²„μ „
β”β”€β”€ modules/
β”‚   β”β”€β”€ iam/                          # IAM λ¨λ“
β”‚   β”‚   β”β”€β”€ roles.tf                  # IAM Role + Instance Profile
β”‚   β”‚   β”β”€β”€ policies.tf               # IAM Policy μ •μ
β”‚   β”‚   β””β”€β”€ outputs.tf                # Role ARN, Profile μ΄λ¦„ μ¶λ ¥
β”‚   β”β”€β”€ kms/                          # KMS λ¨λ“
β”‚   β”‚   β”β”€β”€ main.tf                   # KMS Key μƒμ„±
β”‚   β”‚   β””β”€β”€ outputs.tf                # Key ARN, ID μ¶λ ¥
β”‚   β””β”€β”€ secrets/                      # Secrets Manager λ¨λ“
β”‚       β”β”€β”€ main.tf                   # Secret μƒμ„±
β”‚       β””β”€β”€ outputs.tf                # Secret ARN μ¶λ ¥
β””β”€β”€ docs/
    β””β”€β”€ security-best-practices.md    # λ³΄μ• λ¨λ²” μ‚¬λ΅€ λ¬Έμ„
```

## π€ μ‹¤μµ κ°€μ΄λ“

```bash
git checkout 06-security-basic
terraform init
terraform plan      # μƒμ„±λ  λ³΄μ• λ¦¬μ†μ¤ ν™•μΈ
terraform apply

# λ¦¬μ†μ¤ μ •λ¦¬
terraform destroy
```

## π’΅ ν•µμ‹¬ ν•™μµ ν¬μΈνΈ

### 1. IAM μµμ† κ¶ν• μ›μΉ™

```hcl
# λ‚μ μ - λ¨λ“  κ¶ν• λ¶€μ—¬ (μ λ€ κΈμ§€!)
{
  "Effect": "Allow",
  "Action": "*",
  "Resource": "*"
}

# μΆ‹μ€ μ - ν•„μ”ν• κ¶ν•λ§ λ¶€μ—¬
{
  "Effect": "Allow",
  "Action": [
    "s3:GetObject",
    "s3:ListBucket"
  ],
  "Resource": [
    "arn:aws:s3:::my-bucket",
    "arn:aws:s3:::my-bucket/*"
  ]
}
```

### 2. KMS μ•”νΈν™”

```hcl
resource "aws_kms_key" "main" {
  description             = "λ°μ΄ν„° μ•”νΈν™” ν‚¤"
  deletion_window_in_days = 7       # μ‚­μ  λ€κΈ° κΈ°κ°„
  enable_key_rotation     = true    # μλ™ ν‚¤ κµμ²΄ (1λ…„)
}
```

### 3. Secrets Manager

```hcl
resource "aws_secretsmanager_secret" "db_password" {
  name = "db-password"
  kms_key_id = aws_kms_key.main.arn  # KMSλ΅ μ•”νΈν™”
}
```

## β… ν•™μµ μ²΄ν¬λ¦¬μ¤νΈ

- [ ] IAM Roleκ³Ό Policyμ μ°¨μ΄ μ΄ν•΄
- [ ] Instance Profileμ μ—­ν•  μ΄ν•΄
- [ ] KMS ν‚¤ μƒμ„± λ° ν‚¤ κµμ²΄ μ„¤μ •
- [ ] Secrets Managerλ΅ λΉ„λ°€ μ €μ¥
- [ ] μµμ† κ¶ν• μ›μΉ™ μ μ©
- [ ] λ¦¬μ†μ¤ μ •λ¦¬ μ™„λ£

## π”„ λ‹¤μ λ‹¨κ³„

λ³΄μ• κΈ°μ΄λ¥Ό λ§μ¤ν„°ν–μµλ‹λ‹¤! π‰

```bash
terraform destroy
git checkout 07-security-advanced
```

[β† μ΄μ „: 05-remote-state](../../tree/05-remote-state) | [λ‹¤μ: 07-security-advanced β†’](../../tree/07-security-advanced)

---

**μ‘μ„±μΌ**: 2025-02-02
**λ‚μ΄λ„**: π΅ μ¤‘κΈ‰
**ν•™μµ μ‹κ°„**: 4μ‹κ°„
